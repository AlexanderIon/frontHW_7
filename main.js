!function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);class i{constructor(t,e,n){this.parentEl=t,this.portForSend=e,this.xhr=n,this.method="POST",this.response={},this.formTkSubmit=this.formTkSubmit.bind(this),this.closeFrom=this.closeFrom.bind(this),this.delForm=this.delForm.bind(this)}static get getHtlm(){return'\n        <form class="form_add_ticket" id="formTicketFull">\n        <h2 class="title-forlm"> ДОБАВИТЬ ТИКЕР</h2>\n        <div class="form_add_ticket_data">\n            <div class="ticketfull" >\n                <label class="title_input">Кратое описание</label>\n                <input class="ticketfull__data" id="newNameTk" name="name" class="input" placeholder="Ticket">\n            </div>\n            <div class="ticketfull" >\n                <label class="title_input">Описание задачи</label>\n                \x3c!-- <input class="ticketfull__data" name="descreption" class="input" placeholder="description"> --\x3e\n                 <textarea class="ticketfull__data" id="description"  name="descreption" rows="4"></textarea>\n            </div>\n            <div class="form_add_ticket_btns" >\n                <button class="btnCreate" id="create_ticket" >CREATE</button>\n                <button class="btnCancel" id="close_form">CANCEL</button>\n    \n            </div>\n        </div>            \n        </form>\n        '}static get selectorForm(){return".form_add_ticket"}static get title(){return".title-forlm"}static get closeBtnForm(){return".btnCancel"}static get inputName(){return"newNameTk"}static get inputDescrp(){return"description"}delForm(){const t=document.querySelector(i.selectorForm);t.parentNode.removeChild(t)}addForm(){this.parentEl.innerHTML=i.getHtlm,this.elememt=this.parentEl.querySelector(i.selectorForm),this.title=this.elememt.querySelector(i.title),this.nameTk=document.getElementById(i.inputName),this.discription=document.getElementById("description"),this.elememt.addEventListener("submit",this.formTkSubmit),this.btnCloseFrom=this.elememt.querySelector(i.closeBtnForm),this.btnCloseFrom.addEventListener("click",this.closeFrom)}formTkSubmit(t){if(t.preventDefault(),"POST"!==this.method){console.log("This is not a POST");const t=document.querySelector(i.selectorForm);return console.log(t),this.xhr.open("PUT",`http://localhost:${this.portForSend}/?method=changeTicket`),void this.xhr.send(t)}if(""===this.nameTk.value)return;const e=new FormData(this.elememt);this.xhr.open("POST",`http://localhost:${this.portForSend}/?method=createTicket`),this.xhr.send(e),console.log("FORM was Fulled data spent SERVER"),this.delForm()}closeFrom(t){t.preventDefault(),console.log("you are press Close"),this.delForm()}}class s{constructor(t,e,n){this.parentEl=t,this.xhr=e,this.port=n,this.clickBtnReduct=this.clickBtnReduct.bind(this),this.clickBtnDelete=this.clickBtnDelete.bind(this)}static get getHtml(){return'\n        <div class="element_list">\n            <div class="element_list__content"> </div>\n            <div class="element_list__btns">\n                <button class=\'element_list__btn_reduct\' >\n                <button class=\'element_list__btn_del\'>\n            </div>\n         </div>\n            '}static get selector(){return".element_list"}static get content(){return".element_list__content"}static get btnReduct(){return".element_list__btn_reduct"}static get btnDelete(){return".element_list__btn_del"}addElement(t){this.parentEl.insertAdjacentHTML("afterbegin",s.getHtml),this.elementList=this.parentEl.querySelector(".element_list");const e=t.id;this.elementList.id=""+e,this.elementList.dataset.description=t.description,this.elementList.dataset.name=t.name,this.content=this.elementList.querySelector(s.content),this.content.textContent=t.name,this.btnReduct=this.elementList.querySelector(s.btnReduct),this.btnDelete=this.elementList.querySelector(s.btnDelete),this.btnReduct.addEventListener("click",this.clickBtnReduct),this.btnDelete.addEventListener("click",this.clickBtnDelete)}clickBtnReduct(t){const e=t.currentTarget.closest(s.selector),n=document.querySelector(".for_form"),r=new i(n);console.log(e),r.addForm(),r.method={method:"PUT",data:{name:e.getAttribute("data-name"),description:e.getAttribute("data-description"),id:e.id}},r.title.textContent="ИЗМЕНЕНИЕ ТИКЕТА",r.nameTk.value=e.getAttribute("data-name"),r.discription.textContent=e.getAttribute("data-description"),console.log("You are going to  Reduct e.target")}clickBtnDelete(t){const e=t.currentTarget.closest(s.selector);e.parentNode.removeChild(e),console.log("You pess on DELETE"),console.log(e.id),this.xhr.open("DELETE",`http://localhost:${this.port}/?method=deleteId&id=${e.id}`),this.xhr.send()}}const r=new XMLHttpRequest,o=document.querySelector(".for_elements"),l=document.querySelector(".for_form"),c=new i(l,3500,r),a=new s(o,r,3500);r.onreadystatechange=function(){if(4!==r.readyState)return;const t=JSON.parse(r.responseText);console.log(t),"DELETE"!==t.method&&a.addElement(t)};document.querySelector(".btn_add_Tk").addEventListener("click",t=>{t.preventDefault(),c.addForm()});n(0),n(1)}]);
//# sourceMappingURL=main.js.map